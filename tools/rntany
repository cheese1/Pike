#!/usr/bin/env pike
// -*- pike -*-

// Used to run an arbitrary command with sprshd.

inherit "lib.pike";

int verbose=0;

int main(int argc, array(string) argv)
{
  int ret;

  if (argv[1] == "-v" || argv[1] == "--verbose") {
    verbose = 1;
    argv = argv[0..0] + argv[2..];
  }

  if(verbose)
  { 
    ret=do_cmd(argv[1..]);
  }else{
    ret=silent_do_cmd(argv[1..]);
  }

  if(ret)
    werror("The command returned error code %d.\n",ret);

  // Attempt to flush the NFS cache.
  array(string) files = get_dir(".");

  exit(ret);
}
